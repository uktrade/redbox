{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "docker-compose up deps",
            "type": "shell",
            "command": "docker compose up -d unstructured db minio opensearch opensearch-dashboards",
            "options": {
                "cwd": "${workspaceFolder}",
                "env": {
                    "DOCKER_DEFAULT_PLATFORM": "linux/amd64"
                }
            }
        },
        {
            "label": "docker-compose down deps",
            "type": "shell",
            "command": "docker compose down unstructured db minio opensearch opensearch-dashboards",
            "options": {
                "cwd": "${workspaceFolder}",
                "env": {
                    "DOCKER_DEFAULT_PLATFORM": "linux/amd64"
                }
            },
            "problemMatcher": []
        },

        {
            "label": "Django: QCluster",
            "type": "shell",
            "command": "${command:python.interpreterPath} django_app/manage.py qcluster",
            "dependsOn": ["docker-compose up deps"],
            "options": {
                "env": {
                "PYTHONUNBUFFERED": "1",
                "USE_LOCAL_ENV": "true"
                },
                "cwd": "${workspaceFolder}"
            },
            "isBackground": false,
            "presentation": {
                "panel": "dedicated",
                "reveal": "always",
                "group": "qcluster",
                "showReuseMessage": false
            },
            "problemMatcher": []
        }
    ]
}
